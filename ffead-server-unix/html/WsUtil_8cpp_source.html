<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ffead.server.doc: src/WsUtil.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>src/WsUtil.cpp</h1><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">        Copyright 2010, Sumeet Chhetri </span>
<a name="l00003"></a>00003 <span class="comment">  </span>
<a name="l00004"></a>00004 <span class="comment">    Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); </span>
<a name="l00005"></a>00005 <span class="comment">    you may not use this file except in compliance with the License. </span>
<a name="l00006"></a>00006 <span class="comment">    You may obtain a copy of the License at </span>
<a name="l00007"></a>00007 <span class="comment">  </span>
<a name="l00008"></a>00008 <span class="comment">        http://www.apache.org/licenses/LICENSE-2.0 </span>
<a name="l00009"></a>00009 <span class="comment">  </span>
<a name="l00010"></a>00010 <span class="comment">    Unless required by applicable law or agreed to in writing, software </span>
<a name="l00011"></a>00011 <span class="comment">    distributed under the License is distributed on an &quot;AS IS&quot; BASIS, </span>
<a name="l00012"></a>00012 <span class="comment">    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. </span>
<a name="l00013"></a>00013 <span class="comment">    See the License for the specific language governing permissions and </span>
<a name="l00014"></a>00014 <span class="comment">    limitations under the License.  </span>
<a name="l00015"></a>00015 <span class="comment">*/</span>
<a name="l00016"></a>00016 <span class="comment">/*</span>
<a name="l00017"></a>00017 <span class="comment"> * WsUtil.cpp</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> *  Created on: Sep 21, 2009</span>
<a name="l00020"></a>00020 <span class="comment"> *      Author: sumeet</span>
<a name="l00021"></a>00021 <span class="comment"> */</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;WsUtil.h&quot;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 WsUtil::WsUtil() {
<a name="l00026"></a>00026         <span class="comment">// TODO Auto-generated constructor stub</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 }
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 WsUtil::~WsUtil() {
<a name="l00031"></a>00031         <span class="comment">// TODO Auto-generated destructor stub</span>
<a name="l00032"></a>00032 }
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="keywordtype">string</span> WsUtil::generateAllWSDL(vector&lt;string&gt; files,<span class="keywordtype">string</span> resp,map&lt;string,string&gt; &amp;wsmap)
<a name="l00035"></a>00035 {
<a name="l00036"></a>00036         <span class="keywordtype">string</span> ret,headers=<span class="stringliteral">&quot;#include \&quot;Exception.h\&quot;\n#include \&quot;string\&quot;\n#include &lt;sstream&gt;\n#include &lt;boost/lexical_cast.hpp&gt;\n#include \&quot;Element.h\&quot;\ntypedef vector&lt;Element&gt; ElementList;\ntypedef map&lt;string,string&gt; AttributeList;\n&quot;</span>;
<a name="l00037"></a>00037         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> var = 0; var &lt; files.size(); ++var)
<a name="l00038"></a>00038         {
<a name="l00039"></a>00039                 <span class="keywordtype">string</span> webdir = resp+<span class="stringliteral">&quot;../web/&quot;</span>+files.at(var);
<a name="l00040"></a>00040                 ret += generateWSDL(webdir+<span class="stringliteral">&quot;/config/ws.xml&quot;</span>,webdir+<span class="stringliteral">&quot;/include/&quot;</span>,resp,headers,wsmap,files.at(var));
<a name="l00041"></a>00041         }
<a name="l00042"></a>00042         ret = (headers + <span class="stringliteral">&quot;using namespace std;\n\n&quot;</span> + ret);
<a name="l00043"></a>00043         <span class="keywordflow">return</span> ret;
<a name="l00044"></a>00044 }
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keywordtype">string</span> WsUtil::generateWSDL(<span class="keywordtype">string</span> file,<span class="keywordtype">string</span> usrinc,<span class="keywordtype">string</span> resp,<span class="keywordtype">string</span> &amp;headers,map&lt;string,string&gt; &amp;wsmap,<span class="keywordtype">string</span> appname)
<a name="l00047"></a>00047 {
<a name="l00048"></a>00048         <a class="code" href="classXmlParser.html">XmlParser</a> parser(<span class="stringliteral">&quot;Parser&quot;</span>);
<a name="l00049"></a>00049         <a class="code" href="classDocument.html">Document</a> doc = parser.getDocument(file);
<a name="l00050"></a>00050         <a class="code" href="classElement.html">Element</a> root = doc.getRootElement();
<a name="l00051"></a>00051         <span class="keyword">typedef</span> vector&lt;Element&gt; ElementList;
<a name="l00052"></a>00052         <span class="keyword">typedef</span> map&lt;string,string&gt; strMap;
<a name="l00053"></a>00053         <span class="keyword">typedef</span> map&lt;string,strMap&gt; meth_Map;
<a name="l00054"></a>00054         <span class="keyword">typedef</span> map&lt;string,meth_Map&gt; ws_inp_out_Map;
<a name="l00055"></a>00055         ElementList wsvcs = root.getChildElements();
<a name="l00056"></a>00056         <span class="keywordflow">if</span>(wsvcs.size()==0)
<a name="l00057"></a>00057                 <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;
<a name="l00058"></a>00058         <a class="code" href="classReflection.html">Reflection</a> ref;
<a name="l00059"></a>00059         <a class="code" href="classTemplateEngine.html">TemplateEngine</a> templ;
<a name="l00060"></a>00060         ws_inp_out_Map ws_info;
<a name="l00061"></a>00061         <span class="keywordtype">string</span> ws_funcs,obj_mapng,retObj_xml;
<a name="l00062"></a>00062         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;wsvcs.size();i++)
<a name="l00063"></a>00063         {
<a name="l00064"></a>00064                 meth_Map meth_info;
<a name="l00065"></a>00065                 Context gcntxt;
<a name="l00066"></a>00066                 <span class="keywordtype">string</span> ws_name,reqr_res_bind,wsdl_msgs,wsdl_ops,wsdl_bind,wsdl,wsdl_obj_bind;
<a name="l00067"></a>00067                 <a class="code" href="classElement.html">Element</a> ws = wsvcs.at(i);
<a name="l00068"></a>00068                 ws_name = ws.getAttribute(<span class="stringliteral">&quot;class&quot;</span>);
<a name="l00069"></a>00069                 gcntxt[<span class="stringliteral">&quot;WS_NAME&quot;</span>] = ws_name;
<a name="l00070"></a>00070                 wsmap[ws_name] = appname;
<a name="l00071"></a>00071                 cout &lt;&lt; <span class="stringliteral">&quot;Web service &quot;</span> &lt;&lt; ws_name &lt;&lt; <span class="stringliteral">&quot; found for appname &quot;</span> &lt;&lt; appname &lt;&lt; endl;
<a name="l00072"></a>00072                 strVec info = ref.getAfcObjectData(usrinc+ws.getAttribute(<span class="stringliteral">&quot;class&quot;</span>)+<span class="stringliteral">&quot;.h&quot;</span>, <span class="keyword">false</span>);
<a name="l00073"></a>00073                 headers.append(<span class="stringliteral">&quot;#include \&quot;&quot;</span>+ws.getAttribute(<span class="stringliteral">&quot;class&quot;</span>)+<span class="stringliteral">&quot;.h\&quot;\n&quot;</span>);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075                 <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i=0;i&lt;info.size();i++)
<a name="l00076"></a>00076                 {
<a name="l00077"></a>00077                         <span class="keywordtype">string</span> temp,temp11;
<a name="l00078"></a>00078                         strMap in_out_info;
<a name="l00079"></a>00079                         temp = info.at(i);
<a name="l00080"></a>00080                         temp11 = temp.substr(temp.find(<span class="stringliteral">&quot;(&quot;</span>)+1);
<a name="l00081"></a>00081                         temp = temp.substr(0,temp.find(<span class="stringliteral">&quot;(&quot;</span>));
<a name="l00082"></a>00082 
<a name="l00083"></a>00083                         <span class="comment">//boost::replace_first(temp,&quot;(&quot;,&quot; &quot;);</span>
<a name="l00084"></a>00084                         boost::replace_all(temp11,<span class="stringliteral">&quot;;&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);
<a name="l00085"></a>00085                         boost::replace_first(temp11,<span class="stringliteral">&quot;)&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00086"></a>00086                         strVec results,results1;
<a name="l00087"></a>00087                         boost::iter_split(results, temp, boost::first_finder(<span class="stringliteral">&quot; &quot;</span>));
<a name="l00088"></a>00088                         boost::iter_split(results1, temp11, boost::first_finder(<span class="stringliteral">&quot;,&quot;</span>));
<a name="l00089"></a>00089                         <span class="keywordtype">string</span> retType,methName,inp_params;
<a name="l00090"></a>00090                         <span class="keywordflow">if</span>(results.size()&lt;2)
<a name="l00091"></a>00091                                 <span class="keywordflow">continue</span>;
<a name="l00092"></a>00092                         <span class="keywordflow">if</span>(results.size()&gt;0 &amp;&amp; (results.at(0)==ws.getAttribute(<span class="stringliteral">&quot;class&quot;</span>) || temp.find(<span class="stringliteral">&quot;~&quot;</span>)!=string::npos))
<a name="l00093"></a>00093                                 <span class="keywordflow">continue</span>;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095                         methName = results.at(1);
<a name="l00096"></a>00096 
<a name="l00097"></a>00097                         in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>] = ws.getElementByName(methName).getAttribute(<span class="stringliteral">&quot;outname&quot;</span>);
<a name="l00098"></a>00098                         cout &lt;&lt; in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>] &lt;&lt; flush;
<a name="l00099"></a>00099                         in_out_info[<span class="stringliteral">&quot;RETURNTYP&quot;</span>] = results.at(0);
<a name="l00100"></a>00100                         <span class="keywordflow">if</span>(results.at(0).find(<span class="stringliteral">&quot;vector&lt;&quot;</span>)!=string::npos)
<a name="l00101"></a>00101                         {
<a name="l00102"></a>00102                                 <span class="keywordtype">string</span> vecn = results.at(0);
<a name="l00103"></a>00103                                 boost::replace_first(vecn,<span class="stringliteral">&quot;vector&lt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00104"></a>00104                                 boost::replace_first(vecn,<span class="stringliteral">&quot;&gt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00105"></a>00105                                 boost::trim(vecn);
<a name="l00106"></a>00106                                 <span class="keywordflow">if</span>(vecn==<span class="stringliteral">&quot;int&quot;</span> || vecn==<span class="stringliteral">&quot;double&quot;</span> || vecn==<span class="stringliteral">&quot;float&quot;</span> || vecn==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00107"></a>00107                                 {
<a name="l00108"></a>00108                                         retType = <span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; maxOccurs=\&quot;unbounded\&quot; name=\&quot;&quot;</span>+in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:&quot;</span>+vecn+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>;
<a name="l00109"></a>00109                                 }
<a name="l00110"></a>00110                                 <span class="keywordflow">else</span>
<a name="l00111"></a>00111                                 {
<a name="l00112"></a>00112                                         results1.push_back(vecn);
<a name="l00113"></a>00113                                         retType = <span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; maxOccurs=\&quot;unbounded\&quot; name=\&quot;&quot;</span>+in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;\&quot; type=\&quot;ns0:&quot;</span>+vecn+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>;
<a name="l00114"></a>00114                                 }
<a name="l00115"></a>00115                         }
<a name="l00116"></a>00116                         <span class="keywordflow">else</span>
<a name="l00117"></a>00117                         {
<a name="l00118"></a>00118                                 <span class="keywordflow">if</span>(results.at(0)!=<span class="stringliteral">&quot;void&quot;</span>)
<a name="l00119"></a>00119                                 {
<a name="l00120"></a>00120                                         <span class="keywordflow">if</span>(results.at(0)==<span class="stringliteral">&quot;int&quot;</span> || results.at(0)==<span class="stringliteral">&quot;double&quot;</span> || results.at(0)==<span class="stringliteral">&quot;float&quot;</span> || results.at(0)==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00121"></a>00121                                                 retType = <span class="stringliteral">&quot;\n&lt;xsd:element name=\&quot;&quot;</span>+in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:&quot;</span>+results.at(0)+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>;
<a name="l00122"></a>00122                                         <span class="keywordflow">else</span>
<a name="l00123"></a>00123                                                 retType = <span class="stringliteral">&quot;\n&lt;xsd:element name=\&quot;&quot;</span>+in_out_info[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;\&quot; type=\&quot;ns0:&quot;</span>+results.at(0)+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>;
<a name="l00124"></a>00124                                 }
<a name="l00125"></a>00125                         }
<a name="l00126"></a>00126                         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j=0;j&lt;results1.size();j++)
<a name="l00127"></a>00127                         {
<a name="l00128"></a>00128                                 <span class="keywordtype">string</span> type;
<a name="l00129"></a>00129                                 strVec results2;
<a name="l00130"></a>00130                                 boost::iter_split(results2, results1.at(j), boost::first_finder(<span class="stringliteral">&quot; &quot;</span>));
<a name="l00131"></a>00131                                 type = results2.at(0);
<a name="l00132"></a>00132                                 <span class="keywordtype">int</span> srn = j;
<a name="l00133"></a>00133                                 <span class="keywordtype">char</span> chr = boost::lexical_cast&lt;<span class="keywordtype">char</span>&gt;(j);
<a name="l00134"></a>00134                                 stringstream ss;
<a name="l00135"></a>00135                                 ss &lt;&lt; srn;
<a name="l00136"></a>00136                                 <span class="keywordtype">string</span> te;
<a name="l00137"></a>00137                                 ss &gt;&gt; te;
<a name="l00138"></a>00138                                 <span class="keywordflow">if</span>(type==<span class="stringliteral">&quot;int&quot;</span> || type==<span class="stringliteral">&quot;float&quot;</span> || type==<span class="stringliteral">&quot;double&quot;</span>)
<a name="l00139"></a>00139                                 {
<a name="l00140"></a>00140                                         inp_params.append(<span class="stringliteral">&quot;\n&lt;xsd:element name=\&quot;&quot;</span>+results2.at(1)+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:&quot;</span>+type+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>);
<a name="l00141"></a>00141                                         in_out_info[chr+results2.at(1)] = type;
<a name="l00142"></a>00142                                 }
<a name="l00143"></a>00143                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00144"></a>00144                                 {
<a name="l00145"></a>00145                                         inp_params.append(<span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; name=\&quot;&quot;</span>+results2.at(1)+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:string\&quot;/&gt;&quot;</span>);
<a name="l00146"></a>00146                                         in_out_info[chr+results2.at(1)] = type;
<a name="l00147"></a>00147                                 }
<a name="l00148"></a>00148                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(type!=<span class="stringliteral">&quot;&quot;</span>)
<a name="l00149"></a>00149                                 {
<a name="l00150"></a>00150                                         <span class="keywordflow">if</span>(results2.size()&gt;=2)
<a name="l00151"></a>00151                                                 in_out_info[chr+results2.at(1)] = type;
<a name="l00152"></a>00152                                         <span class="keywordflow">else</span>
<a name="l00153"></a>00153                                                 cout &lt;&lt; <span class="stringliteral">&quot;invalid thing happenin &quot;</span> &lt;&lt; results1.at(j) &lt;&lt; endl;
<a name="l00154"></a>00154                                         strMap allfs,tyfs;
<a name="l00155"></a>00155                                         <span class="keywordflow">if</span>(type.find(<span class="stringliteral">&quot;vector&lt;&quot;</span>)!=string::npos &amp;&amp; results2.size()==2)
<a name="l00156"></a>00156                                         {
<a name="l00157"></a>00157                                                 <span class="keywordtype">string</span> vecn = type;
<a name="l00158"></a>00158                                                 boost::replace_first(vecn,<span class="stringliteral">&quot;vector&lt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00159"></a>00159                                                 boost::replace_first(vecn,<span class="stringliteral">&quot;&gt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00160"></a>00160                                                 boost::trim(vecn);
<a name="l00161"></a>00161                                                 headers.append(<span class="stringliteral">&quot;#include \&quot;&quot;</span>+vecn+<span class="stringliteral">&quot;.h\&quot;\n&quot;</span>);
<a name="l00162"></a>00162                                                 type = vecn;
<a name="l00163"></a>00163                                                 inp_params.append(<span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; maxOccurs=\&quot;unbounded\&quot; name=\&quot;&quot;</span>+results2.at(1)+<span class="stringliteral">&quot;\&quot; type=\&quot;ns0:&quot;</span>+type+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>);
<a name="l00164"></a>00164                                         }
<a name="l00165"></a>00165                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(results2.size()==2)
<a name="l00166"></a>00166                                         {
<a name="l00167"></a>00167                                                 headers.append(<span class="stringliteral">&quot;#include \&quot;&quot;</span>+type+<span class="stringliteral">&quot;.h\&quot;\n&quot;</span>);
<a name="l00168"></a>00168                                                 inp_params.append(<span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; name=\&quot;&quot;</span>+results2.at(1)+<span class="stringliteral">&quot;\&quot; type=\&quot;ns0:&quot;</span>+type+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>);
<a name="l00169"></a>00169                                         }
<a name="l00170"></a>00170                                         strVec onjinf = ref.getAfcObjectData(usrinc+type+<span class="stringliteral">&quot;.h&quot;</span>, <span class="keyword">false</span>);
<a name="l00171"></a>00171                                         <span class="keywordflow">if</span>(type==<span class="stringliteral">&quot;int&quot;</span> || type==<span class="stringliteral">&quot;float&quot;</span> || type==<span class="stringliteral">&quot;double&quot;</span> || type==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00172"></a>00172                                                 <span class="keywordflow">continue</span>;
<a name="l00173"></a>00173                                         obj_mapng.append(type+<span class="stringliteral">&quot; _getObj&quot;</span>+type+<span class="stringliteral">&quot;(Element ele)\n{\n&quot;</span>);
<a name="l00174"></a>00174                                         obj_mapng.append(type+<span class="stringliteral">&quot; _obj;\n&quot;</span>);
<a name="l00175"></a>00175                                         retObj_xml.append(<span class="stringliteral">&quot;string _getRetXmlFor&quot;</span>+type+<span class="stringliteral">&quot;(&quot;</span>+type+<span class="stringliteral">&quot; _obj,string namespce)\n{\n&quot;</span>);
<a name="l00176"></a>00176                                         <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> k=0;k&lt;onjinf.size();k++)
<a name="l00177"></a>00177                                         {
<a name="l00178"></a>00178                                                 <span class="keywordtype">string</span> temp1,field,type;
<a name="l00179"></a>00179                                                 temp1 = onjinf.at(k);
<a name="l00180"></a>00180                                                 <span class="keywordflow">if</span>(temp1.find(<span class="stringliteral">&quot;,&quot;</span>)!=string::npos)
<a name="l00181"></a>00181                                                         <span class="keywordflow">continue</span>;
<a name="l00182"></a>00182                                                 <span class="keywordtype">size_t</span> s = temp1.find(<span class="stringliteral">&quot;get&quot;</span>);
<a name="l00183"></a>00183                                                 <span class="keywordtype">size_t</span> s1 = temp1.find(<span class="stringliteral">&quot;set&quot;</span>);
<a name="l00184"></a>00184                                                 <span class="keywordflow">if</span>(s!=string::npos)
<a name="l00185"></a>00185                                                 {
<a name="l00186"></a>00186                                                         <span class="keywordtype">size_t</span> e = temp1.find(<span class="stringliteral">&quot;(&quot;</span>);
<a name="l00187"></a>00187                                                         field = temp1.substr(s+3,e-s+3);
<a name="l00188"></a>00188                                                         field = AfcUtil::reverseCamelCased(field);
<a name="l00189"></a>00189                                                         field = field.substr(0,field.find(<span class="stringliteral">&quot;(&quot;</span>));
<a name="l00190"></a>00190                                                         cout &lt;&lt; <span class="stringliteral">&quot;\nField--- &quot;</span> &lt;&lt; field &lt;&lt; flush;
<a name="l00191"></a>00191                                                         allfs[field] = <span class="stringliteral">&quot;&quot;</span>;
<a name="l00192"></a>00192                                                 }
<a name="l00193"></a>00193                                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(s1!=string::npos)
<a name="l00194"></a>00194                                                 {
<a name="l00195"></a>00195                                                         <span class="keywordtype">size_t</span> e = temp1.find(<span class="stringliteral">&quot;(&quot;</span>);
<a name="l00196"></a>00196                                                         <span class="keywordtype">size_t</span> ed = temp1.find(<span class="stringliteral">&quot;)&quot;</span>);
<a name="l00197"></a>00197                                                         field = temp1.substr(s1+3,e-s1+3);
<a name="l00198"></a>00198                                                         field = AfcUtil::reverseCamelCased(field);
<a name="l00199"></a>00199                                                         field = field.substr(0,field.find(<span class="stringliteral">&quot;(&quot;</span>));
<a name="l00200"></a>00200                                                         type = temp1.substr(e+1,ed-e-1);
<a name="l00201"></a>00201                                                         strVec results3;
<a name="l00202"></a>00202                                                         boost::iter_split(results3, type, boost::first_finder(<span class="stringliteral">&quot; &quot;</span>));
<a name="l00203"></a>00203                                                         type = results3.at(0);
<a name="l00204"></a>00204                                                         cout &lt;&lt; <span class="stringliteral">&quot;\nField--- &quot;</span> &lt;&lt; field &lt;&lt; flush;
<a name="l00205"></a>00205                                                         cout &lt;&lt; <span class="stringliteral">&quot;\nType--- &quot;</span> &lt;&lt; type &lt;&lt; flush;
<a name="l00206"></a>00206                                                         allfs[field] = field;
<a name="l00207"></a>00207                                                         tyfs[field] = type;
<a name="l00208"></a>00208                                                 }
<a name="l00209"></a>00209                                         }
<a name="l00210"></a>00210                                         strMap::iterator iter;
<a name="l00211"></a>00211                                         <span class="keywordtype">bool</span> flag = <span class="keyword">false</span>;
<a name="l00212"></a>00212                                         <span class="keywordtype">string</span> obj_binding;
<a name="l00213"></a>00213                                         retObj_xml.append(<span class="stringliteral">&quot;string _ret;\n&quot;</span>);
<a name="l00214"></a>00214                                         retObj_xml.append(<span class="stringliteral">&quot;string val;\n&quot;</span>);
<a name="l00215"></a>00215                                         retObj_xml.append(<span class="stringliteral">&quot;stringstream ss;\n&quot;</span>);
<a name="l00216"></a>00216                                         <span class="keywordflow">for</span>(iter=allfs.begin();iter!=allfs.end();iter++)
<a name="l00217"></a>00217                                         {
<a name="l00218"></a>00218                                                 <span class="keywordflow">if</span>(iter-&gt;second!=<span class="stringliteral">&quot;&quot;</span>)
<a name="l00219"></a>00219                                                 {
<a name="l00220"></a>00220                                                         flag = <span class="keyword">true</span>;
<a name="l00221"></a>00221                                                         <span class="keywordtype">string</span> typ;
<a name="l00222"></a>00222                                                         typ = tyfs[iter-&gt;second];
<a name="l00223"></a>00223                                                         <span class="keywordflow">if</span>(typ==<span class="stringliteral">&quot;int&quot;</span> || typ==<span class="stringliteral">&quot;float&quot;</span> || typ==<span class="stringliteral">&quot;double&quot;</span>)
<a name="l00224"></a>00224                                                         {
<a name="l00225"></a>00225                                                                 retObj_xml.append(<span class="stringliteral">&quot;ss &lt;&lt; _obj.get&quot;</span>+AfcUtil::camelCased(iter-&gt;second)+<span class="stringliteral">&quot;();\n&quot;</span>);
<a name="l00226"></a>00226                                                                 retObj_xml.append(<span class="stringliteral">&quot;ss &gt;&gt; val;\n&quot;</span>);
<a name="l00227"></a>00227                                                                 obj_binding.append(<span class="stringliteral">&quot;\n&lt;xsd:element name=\&quot;&quot;</span>+iter-&gt;second+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:&quot;</span>+typ+<span class="stringliteral">&quot;\&quot;/&gt;&quot;</span>);
<a name="l00228"></a>00228                                                         }
<a name="l00229"></a>00229                                                         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(typ==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00230"></a>00230                                                         {
<a name="l00231"></a>00231                                                                 retObj_xml.append(<span class="stringliteral">&quot;val = _obj.get&quot;</span>+AfcUtil::camelCased(iter-&gt;second)+<span class="stringliteral">&quot;();\n&quot;</span>);
<a name="l00232"></a>00232                                                                 obj_binding.append(<span class="stringliteral">&quot;\n&lt;xsd:element minOccurs=\&quot;0\&quot; name=\&quot;&quot;</span>+iter-&gt;second+<span class="stringliteral">&quot;\&quot; type=\&quot;xsd:string\&quot;/&gt;&quot;</span>);
<a name="l00233"></a>00233                                                         }
<a name="l00234"></a>00234                                                         obj_mapng.append(<span class="stringliteral">&quot;_obj.set&quot;</span>+AfcUtil::camelCased(iter-&gt;second)+<span class="stringliteral">&quot;(boost::lexical_cast&lt;&quot;</span>+typ+<span class="stringliteral">&quot;&gt;(ele.getElementByName(\&quot;&quot;</span>+iter-&gt;second+<span class="stringliteral">&quot;\&quot;).getText()));\n&quot;</span>);
<a name="l00235"></a>00235                                                         retObj_xml.append(<span class="stringliteral">&quot;_ret.append(\&quot;&lt;\&quot;+namespce+\&quot;:&quot;</span>+iter-&gt;second+<span class="stringliteral">&quot;&gt;\&quot;+val+\&quot;&lt;/\&quot;+namespce+\&quot;:&quot;</span>+iter-&gt;second+<span class="stringliteral">&quot;&gt;\&quot;);\n&quot;</span>);
<a name="l00236"></a>00236                                                 }
<a name="l00237"></a>00237                                         }
<a name="l00238"></a>00238                                         obj_mapng.append(<span class="stringliteral">&quot;return _obj;\n}\n&quot;</span>);
<a name="l00239"></a>00239                                         retObj_xml.append(<span class="stringliteral">&quot;return _ret;\n}\n&quot;</span>);
<a name="l00240"></a>00240                                         <span class="keywordflow">if</span>(flag)
<a name="l00241"></a>00241                                         {
<a name="l00242"></a>00242                                                 Context cntxt1;
<a name="l00243"></a>00243                                                 cntxt1[<span class="stringliteral">&quot;OBJ&quot;</span>] = type;
<a name="l00244"></a>00244                                                 cntxt1[<span class="stringliteral">&quot;OBJ_MEMBERS&quot;</span>] = obj_binding;
<a name="l00245"></a>00245                                                 wsdl_obj_bind.append(templ.evaluate(resp+<span class="stringliteral">&quot;templateObjBin.wsdl&quot;</span>,cntxt1));
<a name="l00246"></a>00246                                         }
<a name="l00247"></a>00247                                 }
<a name="l00248"></a>00248                         }
<a name="l00249"></a>00249                         meth_info[methName] = in_out_info;
<a name="l00250"></a>00250                         Context cntxt;
<a name="l00251"></a>00251                         cntxt[<span class="stringliteral">&quot;METH_NAME&quot;</span>] = methName;
<a name="l00252"></a>00252                         cntxt[<span class="stringliteral">&quot;RET_TYPE&quot;</span>] = retType;
<a name="l00253"></a>00253                         cntxt[<span class="stringliteral">&quot;INP_PARAMS&quot;</span>] = inp_params;
<a name="l00254"></a>00254                         reqr_res_bind.append(<span class="stringliteral">&quot;\n&quot;</span>+templ.evaluate(resp+<span class="stringliteral">&quot;templateReqRes.wsdl&quot;</span>,cntxt));
<a name="l00255"></a>00255                         wsdl_msgs.append(<span class="stringliteral">&quot;\n&quot;</span>+templ.evaluate(resp+<span class="stringliteral">&quot;templateWsdlMsg.wsdl&quot;</span>,cntxt));
<a name="l00256"></a>00256                         wsdl_ops.append(<span class="stringliteral">&quot;\n&quot;</span>+templ.evaluate(resp+<span class="stringliteral">&quot;templateWsdlOpe.wsdl&quot;</span>,cntxt));
<a name="l00257"></a>00257                         wsdl_bind.append(<span class="stringliteral">&quot;\n&quot;</span>+templ.evaluate(resp+<span class="stringliteral">&quot;templateWsdlBind.wsdl&quot;</span>,cntxt));
<a name="l00258"></a>00258                 }
<a name="l00259"></a>00259                 ws_info[ws_name] = meth_info;
<a name="l00260"></a>00260                 gcntxt[<span class="stringliteral">&quot;REQ_RES_BINDING&quot;</span>] = reqr_res_bind;
<a name="l00261"></a>00261                 gcntxt[<span class="stringliteral">&quot;WSDL_MESSAGES&quot;</span>] = wsdl_msgs;
<a name="l00262"></a>00262                 gcntxt[<span class="stringliteral">&quot;WSDL_OPERATIONS&quot;</span>] = wsdl_ops;
<a name="l00263"></a>00263                 gcntxt[<span class="stringliteral">&quot;WSDL_BINDING&quot;</span>] = wsdl_bind;
<a name="l00264"></a>00264                 gcntxt[<span class="stringliteral">&quot;OBJ_BINDING&quot;</span>] = wsdl_obj_bind;
<a name="l00265"></a>00265                 gcntxt[<span class="stringliteral">&quot;URL&quot;</span>] = <span class="stringliteral">&quot;http://localhost:8080&quot;</span>;
<a name="l00266"></a>00266                 wsdl = templ.evaluate(resp+<span class="stringliteral">&quot;template.wsdl&quot;</span>,gcntxt);
<a name="l00267"></a>00267                 AfcUtil::writeTofile(resp+ws_name+<span class="stringliteral">&quot;.wsdl&quot;</span>,wsdl,<span class="keyword">true</span>);
<a name="l00268"></a>00268                 ws_funcs.append(obj_mapng);
<a name="l00269"></a>00269                 ws_funcs.append(retObj_xml);
<a name="l00270"></a>00270                 ws_funcs.append(<span class="stringliteral">&quot;extern \&quot;C\&quot;\n{\n&quot;</span>);
<a name="l00271"></a>00271                 ws_inp_out_Map::iterator iter;
<a name="l00272"></a>00272                 <span class="keywordflow">for</span>(iter=ws_info.begin();iter!=ws_info.end();iter++)
<a name="l00273"></a>00273                 {
<a name="l00274"></a>00274                         <span class="keywordtype">string</span> ws_n = iter-&gt;first;
<a name="l00275"></a>00275                         meth_Map meth = iter-&gt;second;
<a name="l00276"></a>00276                         meth_Map::iterator iter1;
<a name="l00277"></a>00277                         <span class="keywordflow">for</span>(iter1=meth.begin();iter1!=meth.end();iter1++)
<a name="l00278"></a>00278                         {
<a name="l00279"></a>00279                                 <span class="keywordtype">string</span> me_n = iter1-&gt;first;
<a name="l00280"></a>00280                                 strMap pars = iter1-&gt;second;
<a name="l00281"></a>00281                                 ws_funcs.append(<span class="stringliteral">&quot;string &quot;</span>+me_n+ws_n+<span class="stringliteral">&quot;(Element _req)\n{\nElement ele;\n&quot;</span>);
<a name="l00282"></a>00282                                 ws_funcs.append(<span class="stringliteral">&quot;string _retStr;\n&quot;</span>);
<a name="l00283"></a>00283                                 ws_funcs.append(<span class="stringliteral">&quot;try{\n&quot;</span>);
<a name="l00284"></a>00284                                 strMap::iterator iter2;
<a name="l00285"></a>00285                                 <span class="keywordtype">string</span> args;
<a name="l00286"></a>00286                                 <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ter = 1;
<a name="l00287"></a>00287                                 cout &lt;&lt; me_n &lt;&lt; ws_n &lt;&lt; pars.size() &lt;&lt; endl;
<a name="l00288"></a>00288                                 <span class="keywordflow">for</span>(iter2=pars.begin();iter2!=pars.end();iter2++)
<a name="l00289"></a>00289                                 {
<a name="l00290"></a>00290                                         <span class="keywordflow">if</span>(iter2-&gt;first!=<span class="stringliteral">&quot;RETURN&quot;</span> &amp;&amp; iter2-&gt;first!=<span class="stringliteral">&quot;RETURNTYP&quot;</span>)
<a name="l00291"></a>00291                                         {
<a name="l00292"></a>00292                                                 <span class="keywordtype">string</span> argname =  iter2-&gt;first.substr(1);
<a name="l00293"></a>00293                                                 <span class="keywordflow">if</span>(iter2-&gt;second==<span class="stringliteral">&quot;int&quot;</span> || iter2-&gt;second==<span class="stringliteral">&quot;double&quot;</span> || iter2-&gt;second==<span class="stringliteral">&quot;float&quot;</span> || iter2-&gt;second==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00294"></a>00294                                                 {
<a name="l00295"></a>00295                                                         ws_funcs.append(<span class="stringliteral">&quot;ele = _req.getElementByName(\&quot;&quot;</span>+argname+<span class="stringliteral">&quot;\&quot;);\n&quot;</span>);
<a name="l00296"></a>00296                                                         ws_funcs.append(iter2-&gt;second+<span class="stringliteral">&quot; &quot;</span>+argname+<span class="stringliteral">&quot;;\n&quot;</span>);
<a name="l00297"></a>00297                                                         ws_funcs.append(<span class="stringliteral">&quot;if(ele.getTagName()!=\&quot;\&quot;)&quot;</span>);
<a name="l00298"></a>00298                                                         ws_funcs.append(argname+<span class="stringliteral">&quot; = boost::lexical_cast&lt;&quot;</span>+iter2-&gt;second+<span class="stringliteral">&quot;&gt;(ele.getText());\n&quot;</span>);
<a name="l00299"></a>00299                                                 }
<a name="l00300"></a>00300                                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(iter2-&gt;second.find(<span class="stringliteral">&quot;vector&lt;&quot;</span>)!=string::npos)
<a name="l00301"></a>00301                                                 {
<a name="l00302"></a>00302                                                         <span class="keywordtype">string</span> vecn = iter2-&gt;second;
<a name="l00303"></a>00303                                                         boost::replace_first(vecn,<span class="stringliteral">&quot;vector&lt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00304"></a>00304                                                         boost::replace_first(vecn,<span class="stringliteral">&quot;&gt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00305"></a>00305                                                         boost::trim(vecn);
<a name="l00306"></a>00306                                                         <span class="keywordflow">if</span>(vecn==<span class="stringliteral">&quot;int&quot;</span> || vecn==<span class="stringliteral">&quot;double&quot;</span> || vecn==<span class="stringliteral">&quot;float&quot;</span> || vecn==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00307"></a>00307                                                         {
<a name="l00308"></a>00308                                                                 ws_funcs.append(<span class="stringliteral">&quot;vector&lt;&quot;</span>+vecn+<span class="stringliteral">&quot;&gt; &quot;</span>+argname+<span class="stringliteral">&quot;;\n&quot;</span>);
<a name="l00309"></a>00309                                                                 ws_funcs.append(<span class="stringliteral">&quot;ElementList list = _req.getElementsByName(\&quot;&quot;</span>+argname+<span class="stringliteral">&quot;\&quot;);\n&quot;</span>);
<a name="l00310"></a>00310                                                                 ws_funcs.append(<span class="stringliteral">&quot;for(int i=0;i&lt;list.size();i++)&quot;</span>);
<a name="l00311"></a>00311                                                                 ws_funcs.append(argname+<span class="stringliteral">&quot;.push_back(boost::lexical_cast&lt;&quot;</span>+vecn+<span class="stringliteral">&quot;&gt;(list.at(i).getText()));\n&quot;</span>);
<a name="l00312"></a>00312                                                         }
<a name="l00313"></a>00313                                                         <span class="keywordflow">else</span>
<a name="l00314"></a>00314                                                         {
<a name="l00315"></a>00315                                                                 ws_funcs.append(<span class="stringliteral">&quot;vector&lt;&quot;</span>+vecn+<span class="stringliteral">&quot;&gt; &quot;</span>+argname+<span class="stringliteral">&quot;;\n&quot;</span>);
<a name="l00316"></a>00316                                                                 ws_funcs.append(<span class="stringliteral">&quot;ElementList list = _req.getElementsByName(\&quot;&quot;</span>+argname+<span class="stringliteral">&quot;\&quot;);\n&quot;</span>);
<a name="l00317"></a>00317                                                                 ws_funcs.append(<span class="stringliteral">&quot;for(int i=0;i&lt;list.size();i++)&quot;</span>);
<a name="l00318"></a>00318                                                                 ws_funcs.append(argname+<span class="stringliteral">&quot;.push_back(_getObjTest(list.at(i)));\n&quot;</span>);
<a name="l00319"></a>00319                                                         }
<a name="l00320"></a>00320                                                 }
<a name="l00321"></a>00321                                                 <span class="keywordflow">else</span>
<a name="l00322"></a>00322                                                 {
<a name="l00323"></a>00323                                                         ws_funcs.append(<span class="stringliteral">&quot;ele = _req.getElementByName(\&quot;&quot;</span>+argname+<span class="stringliteral">&quot;\&quot;);\n&quot;</span>);
<a name="l00324"></a>00324                                                         ws_funcs.append(iter2-&gt;second+<span class="stringliteral">&quot; &quot;</span>+argname+<span class="stringliteral">&quot;;\n&quot;</span>);
<a name="l00325"></a>00325                                                         ws_funcs.append(<span class="stringliteral">&quot;if(ele.getTagName()!=\&quot;\&quot;)&quot;</span>);
<a name="l00326"></a>00326                                                         ws_funcs.append(argname+<span class="stringliteral">&quot; = _getObj&quot;</span>+iter2-&gt;second+<span class="stringliteral">&quot;(ele);\n&quot;</span>);
<a name="l00327"></a>00327                                                 }
<a name="l00328"></a>00328                                                 args.append(argname);
<a name="l00329"></a>00329                                                 <span class="keywordflow">if</span>(ter++&lt;pars.size()-2)
<a name="l00330"></a>00330                                                         args.append(<span class="stringliteral">&quot;,&quot;</span>);
<a name="l00331"></a>00331                                         }
<a name="l00332"></a>00332                                 }
<a name="l00333"></a>00333                                 ws_funcs.append(ws_n+<span class="stringliteral">&quot; _obj;\n&quot;</span>);
<a name="l00334"></a>00334 
<a name="l00335"></a>00335                                 ws_funcs.append(<span class="stringliteral">&quot;AttributeList attl = _req.getAttributes();\n&quot;</span>);
<a name="l00336"></a>00336                                 ws_funcs.append(<span class="stringliteral">&quot;AttributeList::iterator it;\n&quot;</span>);
<a name="l00337"></a>00337                                 ws_funcs.append(<span class="stringliteral">&quot;_retStr = \&quot;&lt;\&quot; + _req.getTagNameSpc() + \&quot;Response\&quot;;\n&quot;</span>);
<a name="l00338"></a>00338                                 ws_funcs.append(<span class="stringliteral">&quot;for(it=attl.begin();it!=attl.end();it++)\n&quot;</span>);
<a name="l00339"></a>00339                                 ws_funcs.append(<span class="stringliteral">&quot;_retStr.append(\&quot; \&quot; + it-&gt;first + \&quot;=\\\&quot;\&quot; + it-&gt;second + \&quot;\\\&quot; \&quot;);\n&quot;</span>);
<a name="l00340"></a>00340                                 ws_funcs.append(<span class="stringliteral">&quot;_retStr.append(\&quot;&gt;\&quot;);\n&quot;</span>);
<a name="l00341"></a>00341                                 <span class="keywordflow">if</span>(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]==<span class="stringliteral">&quot;void&quot;</span>)
<a name="l00342"></a>00342                                 {
<a name="l00343"></a>00343                                         ws_funcs.append(<span class="stringliteral">&quot;_obj.&quot;</span>+me_n+<span class="stringliteral">&quot;(&quot;</span>+args+<span class="stringliteral">&quot;);\n&quot;</span>);
<a name="l00344"></a>00344                                 }
<a name="l00345"></a>00345                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]==<span class="stringliteral">&quot;int&quot;</span> || pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]==<span class="stringliteral">&quot;double&quot;</span> || pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]==<span class="stringliteral">&quot;float&quot;</span> || pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00346"></a>00346                                 {
<a name="l00347"></a>00347                                         ws_funcs.append(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]+<span class="stringliteral">&quot; _retval;\n&quot;</span>);
<a name="l00348"></a>00348                                         ws_funcs.append(<span class="stringliteral">&quot;_retval = _obj.&quot;</span>+me_n+<span class="stringliteral">&quot;(&quot;</span>+args+<span class="stringliteral">&quot;);\n&quot;</span>);
<a name="l00349"></a>00349                                         ws_funcs.append(<span class="stringliteral">&quot;_retStr += \&quot;&lt;\&quot; + _req.getNameSpc() +\&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;+_retval+\&quot;&lt;/\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;;\n&quot;</span>);
<a name="l00350"></a>00350                                 }
<a name="l00351"></a>00351                                 <span class="keywordflow">else</span> <span class="keywordflow">if</span>(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]!=<span class="stringliteral">&quot;&quot;</span>)
<a name="l00352"></a>00352                                 {
<a name="l00353"></a>00353                                         ws_funcs.append(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]+<span class="stringliteral">&quot; _retval;\n&quot;</span>);
<a name="l00354"></a>00354                                         ws_funcs.append(<span class="stringliteral">&quot;_retval = _obj.&quot;</span>+me_n+<span class="stringliteral">&quot;(&quot;</span>+args+<span class="stringliteral">&quot;);\n&quot;</span>);
<a name="l00355"></a>00355                                         <span class="keywordflow">if</span>(pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>].find(<span class="stringliteral">&quot;vector&lt;&quot;</span>)!=string::npos)
<a name="l00356"></a>00356                                         {
<a name="l00357"></a>00357                                                 <span class="keywordtype">string</span> vecn = pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>];
<a name="l00358"></a>00358                                                 boost::replace_first(vecn,<span class="stringliteral">&quot;vector&lt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00359"></a>00359                                                 boost::replace_first(vecn,<span class="stringliteral">&quot;&gt;&quot;</span>,<span class="stringliteral">&quot; &quot;</span>);
<a name="l00360"></a>00360                                                 boost::trim(vecn);
<a name="l00361"></a>00361                                                 <span class="keywordflow">if</span>(vecn==<span class="stringliteral">&quot;int&quot;</span> || vecn==<span class="stringliteral">&quot;double&quot;</span> || vecn==<span class="stringliteral">&quot;float&quot;</span> || vecn==<span class="stringliteral">&quot;string&quot;</span>)
<a name="l00362"></a>00362                                                 {
<a name="l00363"></a>00363                                                         ws_funcs.append(<span class="stringliteral">&quot;for(int i=0;i&lt;_retval.size();i++)&quot;</span>);
<a name="l00364"></a>00364                                                         ws_funcs.append(<span class="stringliteral">&quot;_retStr += \&quot;&lt;\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;+boost::lexical_cast&lt;string&gt;(_retval.at(i))+\&quot;&lt;/\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;;\n&quot;</span>);
<a name="l00365"></a>00365                                                 }
<a name="l00366"></a>00366                                                 <span class="keywordflow">else</span>
<a name="l00367"></a>00367                                                 {
<a name="l00368"></a>00368                                                         ws_funcs.append(<span class="stringliteral">&quot;for(int i=0;i&lt;_retval.size();i++)&quot;</span>);
<a name="l00369"></a>00369                                                         ws_funcs.append(<span class="stringliteral">&quot;_retStr += \&quot;&lt;\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;+_getRetXmlFor&quot;</span>+vecn+<span class="stringliteral">&quot;(_retval.at(i),_req.getNameSpc())+\&quot;&lt;/\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;;\n&quot;</span>);
<a name="l00370"></a>00370                                                 }
<a name="l00371"></a>00371                                         }
<a name="l00372"></a>00372                                         <span class="keywordflow">else</span>
<a name="l00373"></a>00373                                                 ws_funcs.append(<span class="stringliteral">&quot;_retStr += \&quot;&lt;\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;+_getRetXmlFor&quot;</span>+pars[<span class="stringliteral">&quot;RETURNTYP&quot;</span>]+<span class="stringliteral">&quot;(_retval,_req.getNameSpc())+\&quot;&lt;/\&quot; + _req.getNameSpc() + \&quot;:&quot;</span>+pars[<span class="stringliteral">&quot;RETURN&quot;</span>]+<span class="stringliteral">&quot;&gt;\&quot;;\n&quot;</span>);
<a name="l00374"></a>00374                                 }
<a name="l00375"></a>00375                                 ws_funcs.append(<span class="stringliteral">&quot;_retStr += \&quot;&lt;/\&quot; + _req.getTagNameSpc() + \&quot;Response&gt;\&quot;;\n&quot;</span>);
<a name="l00376"></a>00376                                 ws_funcs.append(<span class="stringliteral">&quot;}catch(Exception e){\n&quot;</span>);
<a name="l00377"></a>00377                                 ws_funcs.append(<span class="stringliteral">&quot;return e.getMessage();\n}\n&quot;</span>);
<a name="l00378"></a>00378                                 ws_funcs.append(<span class="stringliteral">&quot;catch(...){\n&quot;</span>);
<a name="l00379"></a>00379                                 ws_funcs.append(<span class="stringliteral">&quot;return \&quot;&lt;soap:Fault&gt;&lt;faultcode&gt;soap:Server&lt;/faultcode&gt;&lt;faultstring&gt;Exception occurred&lt;/faultstring&gt;&lt;/soap:Fault&gt;\&quot;;\n}\n&quot;</span>);
<a name="l00380"></a>00380                                 ws_funcs.append(<span class="stringliteral">&quot;return _retStr;\n}\n&quot;</span>);
<a name="l00381"></a>00381                         }
<a name="l00382"></a>00382                         ws_funcs.append(<span class="stringliteral">&quot;}\n&quot;</span>);
<a name="l00383"></a>00383                 }
<a name="l00384"></a>00384                 <span class="comment">//AfcUtil::writeTofile(rtdcfp+&quot;WsInterface.cpp&quot;,ws_funcs,true);</span>
<a name="l00385"></a>00385         }
<a name="l00386"></a>00386         <span class="keywordflow">return</span> ws_funcs;
<a name="l00387"></a>00387 }
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Mon Feb 6 13:07:55 2012 for ffead.server.doc by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
